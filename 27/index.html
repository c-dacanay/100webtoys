<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="./style.css">
    <link rel="stylesheet" href="../core.css">
    <link rel="icon" href="../favicon.svg">
    <title>0 / 100</title>
</head>

<!-- Before posting:
- Did you change the before and after arrows?
- Did you change the title? how about the bottom numbers?
- Did you cite code?
- Did you change the homepage? (you can save this for later)
-->

<body>
<h3> remove all balls but 1 </h3>
    <div class="nav">
        <a class="next" href="../01/"><h1>⬅</h1></a>
        <div class="details"><small>⟡ 0/<a href="../index.html">100</a> ⟡</small>
        <small id="about"><a href="../about/">about the project</a></small>
        </div>
        <a class="next" href="../01/"><h1>⮕</h1></a>
    </div>
</body>

<script src="../node_modules/matter-js/build/matter.js"></script>

<script>
  var Engine = Matter.Engine,
        Render = Matter.Render,
        Runner = Matter.Runner,
        Composite = Matter.Composite,
        Composites = Matter.Composites,
        Common = Matter.Common,
        MouseConstraint = Matter.MouseConstraint,
        Mouse = Matter.Mouse,
        Bodies = Matter.Bodies;

    // create engine
    var engine = Engine.create(),
        world = engine.world;

    // create renderer
    var render = Render.create({
        element: document.body,
        engine: engine,
        options: {
            width: window.innerWidth,
            height: window.innerHeight,
            background: 'transparent',
            wireframes: false
        }
    });

    Render.run(render);

    // create runner
    var runner = Runner.create();
    Runner.run(runner, engine);

    // add bodies
    Composite.add(world, [
        Bodies.rectangle(500, 650, 2000, 50, { isStatic: true, render: {fillStyle: '#FFFFFA'} }),
        Bodies.rectangle(0, 0, 10, 1400, { isStatic: true, render: {fillStyle: '#FFFFFA'} }),
        Bodies.rectangle((window.innerWidth -15), 0, 20, 1400, { isStatic: true, render: {fillStyle: '#FFFFFA'} }),
    ]);

    // Matter.Composites.stack(xx, yy, columns, rows, columnGap, rowGap, callback) 
    var stack = Composites.stack(10, 0, 30, 8, 0, 0, function(x, y) {
        return Bodies.circle(x, y, Common.random(15, 80), { restitution: 0.6, friction: 0.1 });
    });
    
    Composite.add(world, [
        stack,
        // Bodies.polygon(700, 460, 3, 60),
        // Bodies.polygon(400, 460, 5, 60),
        // Bodies.rectangle(700, 760, 80, 80)
    ]);

    // add mouse control
    var mouse = Mouse.create(render.canvas),
        mouseConstraint = MouseConstraint.create(engine, {
            mouse: mouse,
            constraint: {
                stiffness: 0.2,
                render: {
                    visible: false
                }
            }
        });

    Composite.add(world, mouseConstraint);

    // keep the mouse in sync with rendering
    render.mouse = mouse;

    // fit the render viewport to the scene
    Render.lookAt(render, {
        min: { x: 0, y: 0 },
        max: { x: window.innerWidth, y: window.innerHeight }
    });

    // wrapping using matter-wrap plugin
    // var allBodies = Composite.allBodies(world);

    for (var i = 0; i < allBodies.length; i += 1) {
        allBodies[i].plugin.wrap = {
            min: { x: render.bounds.min.x - 100, y: render.bounds.min.y },
            max: { x: render.bounds.max.x + 100, y: render.bounds.max.y }
        };
    }

</script>
</html>