<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="./style.css">
    <link rel="stylesheet" href="../core.css">
    <link rel="icon" href="../favicon.svg">
    <title>24 / 100</title>
</head>

<!-- Before posting:
- Did you change the before and after arrows?
- Did you change the title? how about the bottom numbers?
- Did you cite code?
- Did you change the homepage? (you can save this for later)
-->

<body>
    <div class="mobile">
        <p>This webtoy is not optimized for small screens or mobile.</p>
        <p>Please visit again on desktop! ♡</p>
    </div>
    <div class="nav">
        <a class="next" href="../23/"><h1>⬅</h1></a>
        <div class="details"><small>⟡ 24/<a href="../index.html">100</a> ⟡</small>
        <small id="about"><a href="../about/">about the project</a></small>
        </div>
        <a class="next" href="../25/"><h1>⮕</h1></a>
    </div>
    <script src="../node_modules/matter-js/build/matter.js"></script>
    <script>

           var Engine = Matter.Engine,
               Render = Matter.Render,
               Runner = Matter.Runner,
               Composites = Matter.Composites,
               Events = Matter.Events,
               Constraint = Matter.Constraint,
               MouseConstraint = Matter.MouseConstraint,
               Mouse = Matter.Mouse,
               Composite = Matter.Composite,
               Bodies = Matter.Bodies;
       
           // create engine
           var engine = Engine.create(),
               world = engine.world;
       
           // create renderer
           var render = Render.create({
               element: document.body,
               engine: engine,
               options: {
                   width: window.innerWidth /  .7,
                   height: window.innerHeight,
                   background: 'transparent',
                   wireframes: false
               }
           });
       
           Render.run(render);
       
           // create runner
           var runner = Runner.create();
           Runner.run(runner, engine);
       

           // color stuff
           let colors = ['#FBFF7B','#E298E4', '#2e94b0', '#7B67F3', '#B6FF8E','#FA5F66']
           // add bodies
           var ground = Bodies.rectangle(395, 600, 1000, 20, { isStatic: true, render: { fillStyle: '#FFFFFA' } }),
               rockOptions = { density: 0.004,
                                render: { fillStyle:'#7B67F3'}},
               rock = Bodies.polygon(170, 450, 8, 20, rockOptions),
               anchor = { x: 170, y: 450 },
               elastic = Constraint.create({ 
                   pointA: anchor, 
                   bodyB: rock, 
                   stiffness: 0.05,
               });
       
           var pyramid = Composites.pyramid(500, 300, 9, 10, 0, 0, function(x, y) {
               return Bodies.rectangle(x, y, 25, 40, {render: {fillStyle: colors[Math.floor(Math.random() * colors.length)]}});
           });
       
           var ground2 = Bodies.rectangle(610, 250, 200, 20, { isStatic: true, render: { fillStyle: '##FBFF7B' } });
       
           var pyramid2 = Composites.pyramid(550, 0, 5, 10, 0, 0, function(x, y) {
               return Bodies.rectangle(x, y, 25, 40, {render: {fillStyle: colors[Math.floor(Math.random() * colors.length)]}});
           });
       
           Composite.add(engine.world, [ground, pyramid, ground2, pyramid2, rock, elastic]);
       
           Events.on(engine, 'afterUpdate', function() {
               if (mouseConstraint.mouse.button === -1 && (rock.position.x > 190 || rock.position.y < 430)) {
                   rock = Bodies.polygon(170, 450, 7, 20, rockOptions);
                   Composite.add(engine.world, rock);
                   elastic.bodyB = rock;
               }
           });
       
           // add mouse control
           var mouse = Mouse.create(render.canvas),
               mouseConstraint = MouseConstraint.create(engine, {
                   mouse: mouse,
                   constraint: {
                       stiffness: 0.2,
                       render: {
                           visible: false
                       }
                   }
               });
       
           Composite.add(world, mouseConstraint);
       
           // keep the mouse in sync with rendering
           render.mouse = mouse;
       
           // fit the render viewport to the scene
           Render.lookAt(render, {
               min: { x: 0, y: 0 },
               max: { x: window.innerWidth, y: window.innerHeight }
           });
    
       </script>
</body>

</html>